import{g as o,c as t,a as n}from"./p-eeff07ad.js";import{k as s,l as e,e as i,c}from"./p-510302c3.js";import{a as r,K as a}from"./p-32861481.js";import{w as f}from"./p-cbf63f1d.js";import"./p-1665515a.js";import"./p-ff17037d.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const u=new WeakMap;const l=(o,t,n,s=0,e=false)=>{if(u.has(o)===n){return}if(n){w(o,t,s,e)}else{p(o,t)}};const d=o=>o===o.getRootNode().activeElement;const w=(o,t,n,s=false)=>{const e=t.parentNode;const i=t.cloneNode(false);i.classList.add("cloned-input");i.tabIndex=-1;if(s){i.disabled=true}e.appendChild(i);u.set(o,i);const c=o.ownerDocument;const r=c.dir==="rtl"?9999:-9999;o.style.pointerEvents="none";t.style.transform=`translate3d(${r}px,${n}px,0) scale(0)`};const p=(o,t)=>{const n=u.get(o);if(n){u.delete(o);n.remove()}o.style.pointerEvents="";t.style.transform=""};const m=50;
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const S=(o,t,n)=>{if(!n||!t){return()=>{}}const i=n=>{if(d(t)){l(o,t,n)}};const c=()=>l(o,t,false);const r=()=>i(true);const a=()=>i(false);s(n,"ionScrollStart",r);s(n,"ionScrollEnd",a);t.addEventListener("blur",c);return()=>{e(n,"ionScrollStart",r);e(n,"ionScrollEnd",a);t.removeEventListener("blur",c)}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const h="input, textarea, [no-blur], [contenteditable]";const y=()=>{let o=true;let t=false;const n=document;const i=()=>{t=true};const c=()=>{o=true};const r=s=>{if(t){t=false;return}const e=n.activeElement;if(!e){return}if(e.matches(h)){return}const i=s.target;if(i===e){return}if(i.matches(h)||i.closest(h)){return}o=false;setTimeout((()=>{if(!o){e.blur()}}),50)};s(n,"ionScrollStart",i);n.addEventListener("focusin",c,true);n.addEventListener("touchend",r,false);return()=>{e(n,"ionScrollStart",i,true);n.removeEventListener("focusin",c,true);n.removeEventListener("touchend",r,false)}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const b=.3;const D=(o,t,n,s)=>{var e;const i=(e=o.closest("ion-item,[ion-item]"))!==null&&e!==void 0?e:o;return K(i.getBoundingClientRect(),t.getBoundingClientRect(),n,s)};const K=(o,t,n,s)=>{const e=o.top;const i=o.bottom;const c=t.top;const r=Math.min(t.bottom,s-n);const a=c+15;const f=r-m;const u=f-i;const l=a-e;const d=Math.round(u<0?-u:l>0?-l:0);const w=Math.min(d,e-c);const p=Math.abs(w);const S=p/b;const h=Math.min(400,Math.max(150,S));return{scrollAmount:w,scrollDuration:h,scrollPadding:n,inputSafeY:-(e-a)+4}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const M="$ionPaddingTimer";const k=(o,t,n)=>{const s=o[M];if(s){clearTimeout(s)}if(t>0){o.style.setProperty("--keyboard-offset",`${t}px`)}else{o[M]=setTimeout((()=>{o.style.setProperty("--keyboard-offset","0px");if(n){n()}}),120)}};const v=(o,t,n)=>{const s=()=>{if(t){k(t,0,n)}};o.addEventListener("focusout",s,{once:true})};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let x=0;const g="data-ionic-skip-scroll-assist";const j=(o,t,n,s,e,i,c,a=false)=>{const u=i&&(c===undefined||c.mode===r.None);let l=false;const d=f!==undefined?f.innerHeight:0;const w=e=>{if(l===false){l=true;return}P(o,t,n,s,e.detail.keyboardHeight,u,a,d,false)};const p=()=>{l=false;f===null||f===void 0?void 0:f.removeEventListener("ionKeyboardDidShow",w);o.removeEventListener("focusout",p,true)};const m=async()=>{if(t.hasAttribute(g)){t.removeAttribute(g);return}P(o,t,n,s,e,u,a,d);f===null||f===void 0?void 0:f.addEventListener("ionKeyboardDidShow",w);o.addEventListener("focusout",p,true)};o.addEventListener("focusin",m,true);return()=>{o.removeEventListener("focusin",m,true);f===null||f===void 0?void 0:f.removeEventListener("ionKeyboardDidShow",w);o.removeEventListener("focusout",p,true)}};const T=o=>{if(document.activeElement===o){return}o.setAttribute(g,"true");o.focus()};const P=async(n,s,e,c,r,a,f=false,u=0,d=true)=>{if(!e&&!c){return}const w=D(n,e||c,r,u);if(e&&Math.abs(w.scrollAmount)<4){T(s);if(a&&e!==null){k(e,x);v(s,e,(()=>x=0))}return}l(n,s,true,w.inputSafeY,f);T(s);i((()=>n.click()));if(a&&e){x=w.scrollPadding;k(e,x)}if(typeof window!=="undefined"){let i;const c=async()=>{if(i!==undefined){clearTimeout(i)}window.removeEventListener("ionKeyboardDidShow",r);window.removeEventListener("ionKeyboardDidShow",c);if(e){await t(e,0,w.scrollAmount,w.scrollDuration)}l(n,s,false,w.inputSafeY);T(s);if(a){v(s,e,(()=>x=0))}};const r=()=>{window.removeEventListener("ionKeyboardDidShow",r);window.addEventListener("ionKeyboardDidShow",c)};if(e){const t=await o(e);const n=t.scrollHeight-t.clientHeight;if(d&&w.scrollAmount>n-t.scrollTop){if(s.type==="password"){w.scrollAmount+=m;window.addEventListener("ionKeyboardDidShow",r)}else{window.addEventListener("ionKeyboardDidShow",c)}i=setTimeout(c,1e3);return}}c()}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $=true;const A=async(o,t)=>{const s=document;const e=t==="ios";const i=t==="android";const r=o.getNumber("keyboardHeight",290);const f=o.getBoolean("scrollAssist",true);const u=o.getBoolean("hideCaretOnScroll",e);const l=o.getBoolean("inputBlurring",e);const d=o.getBoolean("scrollPadding",true);const w=Array.from(s.querySelectorAll("ion-input, ion-textarea"));const p=new WeakMap;const m=new WeakMap;const h=await a.getResizeMode();const b=async o=>{await new Promise((t=>c(o,t)));const t=o.shadowRoot||o;const s=t.querySelector("input")||t.querySelector("textarea");const e=n(o);const a=!e?o.closest("ion-footer"):null;if(!s){return}if(!!e&&u&&!p.has(o)){const t=S(o,s,e);p.set(o,t)}const l=s.type==="date"||s.type==="datetime-local";if(!l&&(!!e||!!a)&&f&&!m.has(o)){const t=j(o,s,e,a,r,d,h,i);m.set(o,t)}};const D=o=>{if(u){const t=p.get(o);if(t){t()}p.delete(o)}if(f){const t=m.get(o);if(t){t()}m.delete(o)}};if(l&&$){y()}for(const o of w){b(o)}s.addEventListener("ionInputDidLoad",(o=>{b(o.detail)}));s.addEventListener("ionInputDidUnload",(o=>{D(o.detail)}))};export{A as startInputShims};
//# sourceMappingURL=p-50a289a7.js.map