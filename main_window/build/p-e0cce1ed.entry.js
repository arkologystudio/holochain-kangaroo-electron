import{r as t,j as i,h as s,e}from"./p-4f4b7319.js";import{g as a}from"./p-bd52ae26.js";import{a as n,d as h}from"./p-6420b556.js";import{s as o,b as r}from"./p-510302c3.js";import{c as l}from"./p-b1004d93.js";import{t as d}from"./p-6f8275aa.js";import{g as c,c as u}from"./p-18d3a1c6.js";const f=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}";const m=class{constructor(s){t(this,s);this.ionNavWillLoad=i(this,"ionNavWillLoad",7);this.ionNavWillChange=i(this,"ionNavWillChange",3);this.ionNavDidChange=i(this,"ionNavDidChange",3);this.lockController=l();this.gestureOrAnimationInProgress=false;this.mode=c(this);this.delegate=undefined;this.animated=true;this.animation=undefined;this.swipeHandler=undefined}swipeHandlerChanged(){if(this.gesture){this.gesture.enable(this.swipeHandler!==undefined)}}async connectedCallback(){const t=()=>{this.gestureOrAnimationInProgress=true;if(this.swipeHandler){this.swipeHandler.onStart()}};this.gesture=(await import("./p-46d6d847.js")).createSwipeBackGesture(this.el,(()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart()),(()=>t()),(t=>{var i;return(i=this.ani)===null||i===void 0?void 0:i.progressStep(t)}),((t,i,s)=>{if(this.ani){this.ani.onFinish((()=>{this.gestureOrAnimationInProgress=false;if(this.swipeHandler){this.swipeHandler.onEnd(t)}}),{oneTimeCallback:true});let e=t?-.001:.001;if(!t){this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)");e+=a([0,0],[1,0],[.68,.28],[1,1],i)[0]}else{e+=a([0,0],[.32,.72],[0,1],[1,1],i)[0]}this.ani.progressEnd(t?1:0,e,s)}else{this.gestureOrAnimationInProgress=false}}));this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){if(this.gesture){this.gesture.destroy();this.gesture=undefined}}async commit(t,i,s){const e=await this.lockController.lock();let a=false;try{a=await this.transition(t,i,s)}catch(t){console.error(t)}e();return a}async setRouteId(t,i,s,e){const a=await this.setRoot(t,i,{duration:s==="root"?0:undefined,direction:s==="back"?"back":"forward",animationBuilder:e});return{changed:a,element:this.activeEl}}async getRouteId(){const t=this.activeEl;return t?{id:t.tagName,element:t,params:this.activeParams}:undefined}async setRoot(t,i,s){if(this.activeComponent===t&&o(i,this.activeParams)){return false}const e=this.activeEl;const a=await n(this.delegate,this.el,t,["ion-page","ion-page-invisible"],i);this.activeComponent=t;this.activeEl=a;this.activeParams=i;await this.commit(a,e,s);await h(this.delegate,e);return true}async transition(t,i,s={}){if(i===t){return false}this.ionNavWillChange.emit();const{el:e,mode:a}=this;const n=this.animated&&u.getBoolean("animated",true);const h=s.animationBuilder||this.animation||u.get("navAnimation");await d(Object.assign(Object.assign({mode:a,animated:n,enteringEl:t,leavingEl:i,baseEl:e,deepWait:r(e),progressCallback:s.progressAnimation?t=>{if(t!==undefined&&!this.gestureOrAnimationInProgress){this.gestureOrAnimationInProgress=true;t.onFinish((()=>{this.gestureOrAnimationInProgress=false;if(this.swipeHandler){this.swipeHandler.onEnd(false)}}),{oneTimeCallback:true});t.progressEnd(0,0,0)}else{this.ani=t}}:undefined},s),{animationBuilder:h}));this.ionNavDidChange.emit();return true}render(){return s("slot",null)}get el(){return e(this)}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}};m.style=f;export{m as ion_router_outlet};
//# sourceMappingURL=p-e0cce1ed.entry.js.map